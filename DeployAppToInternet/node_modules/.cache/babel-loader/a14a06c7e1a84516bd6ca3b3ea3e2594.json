{"ast":null,"code":"import _objectSpread from\"/Users/zhusun/Others/MQ-Teaching/Teaching/COMP3120-2020-S2/Program/part2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/zhusun/Others/MQ-Teaching/Teaching/COMP3120-2020-S2/Program/part2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import logo from\"./logo.svg\";import'./App.css';import noteService from'./services/notes';var Button=function Button(_ref){var eventHandler=_ref.eventHandler,text=_ref.text;var buttonStyle={backgroundColor:'white',color:'black',padding:4,margin:4,fontSize:16,cursor:'pointer',fontStyle:'italic',borderRadius:12};return/*#__PURE__*/React.createElement(\"button\",{style:buttonStyle,onClick:eventHandler},\" \",text,\" \");};var Display=function Display(_ref2){var product=_ref2.product,changeAvailable=_ref2.changeAvailable;var text=product.available?'sold out':'available';return/*#__PURE__*/React.createElement(\"li\",{className:\"product\"},product.id,\" - \",product.name,\" - \",product.category,/*#__PURE__*/React.createElement(Button,{eventHandler:changeAvailable,text:text}));};var Notification=function Notification(_ref3){var message=_ref3.message;if(message===null){return null;}return/*#__PURE__*/React.createElement(\"div\",{className:\"error\"},message);};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState('a new product name'),_useState4=_slicedToArray(_useState3,2),newProductName=_useState4[0],setNewProductName=_useState4[1];var _useState5=useState('a new product category'),_useState6=_slicedToArray(_useState5,2),newProductCategory=_useState6[0],setNewProductCategory=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),showAllProducts=_useState8[0],setShowAllProducts=_useState8[1];var _useState9=useState('no error happened...'),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];//load all existing products from the server\nvar hook=function hook(){console.log('effect');noteService.getAll().then(function(initialNotes){console.log('promoise fulfilled');setProducts(initialNotes);});};useEffect(hook,[]);//add new product\nvar addProduct=function addProduct(event){event.preventDefault();console.log('button clicked',event.target);var productObject={name:newProductName,category:newProductCategory,available:Math.random()>0.5};noteService.createNote(productObject).then(function(returnedProduct){console.log(returnedProduct);setProducts(products.concat(returnedProduct));setNewProductName('a new product name');setNewProductCategory('a new product category');});};var handleProductNameChange=function handleProductNameChange(event){console.log(event.target.value);setNewProductName(event.target.value);};var handleProductCategoryChange=function handleProductCategoryChange(event){console.log(event.target.value);setNewProductCategory(event.target.value);};//change the availability of the product\nvar changeAvailableOf=function changeAvailableOf(id){console.log('the availability of ',id,'needs to be changed');var product=products.find(function(p){return p.id===id;});var changedProduct=_objectSpread(_objectSpread({},product),{},{available:!product.available});noteService.updateNote(id,changedProduct).then(function(returnedProduct){setProducts(products.map(function(product){return product.id!==id?product:returnedProduct;}));}).catch(function(error){setErrorMessage('the product was already deleted from server');setTimeout(function(){setErrorMessage('no errors happened');},5000);setProducts(products.filter(function(p){return p.id!==id;}));});};//show products with constraint\nvar productsToShow=showAllProducts?products:products.filter(function(product){return product.category==='Electronics';});var displayControl=function displayControl(){setShowAllProducts(!showAllProducts);};console.log('render',products.length,'products');return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\" Display existing products \"),/*#__PURE__*/React.createElement(Notification,{message:errorMessage}),/*#__PURE__*/React.createElement(Button,{eventHandler:displayControl,text:\"Show \".concat(showAllProducts?'Electronics':'All')}),/*#__PURE__*/React.createElement(\"ul\",null,productsToShow.map(function(product){return/*#__PURE__*/React.createElement(Display,{key:product.id,product:product,changeAvailable:function changeAvailable(){return changeAvailableOf(product.id);}});}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\" Adding new products \"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:addProduct},/*#__PURE__*/React.createElement(\"input\",{value:newProductName,onChange:handleProductNameChange}),/*#__PURE__*/React.createElement(\"input\",{value:newProductCategory,onChange:handleProductCategoryChange}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\" Save \"))));};export default App;","map":{"version":3,"sources":["/Users/zhusun/Others/MQ-Teaching/Teaching/COMP3120-2020-S2/Program/part2/src/App.js"],"names":["React","useState","useEffect","noteService","Button","eventHandler","text","buttonStyle","backgroundColor","color","padding","margin","fontSize","cursor","fontStyle","borderRadius","Display","product","changeAvailable","available","id","name","category","Notification","message","App","products","setProducts","newProductName","setNewProductName","newProductCategory","setNewProductCategory","showAllProducts","setShowAllProducts","errorMessage","setErrorMessage","hook","console","log","getAll","then","initialNotes","addProduct","event","preventDefault","target","productObject","Math","random","createNote","returnedProduct","concat","handleProductNameChange","value","handleProductCategoryChange","changeAvailableOf","find","p","changedProduct","updateNote","map","catch","error","setTimeout","filter","productsToShow","displayControl","length"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport noteService from './services/notes'\n\n\nconst Button = ({eventHandler, text}) => {\n  const buttonStyle = {\n    backgroundColor: 'white',\n    color: 'black',\n    padding: 4,\n    margin: 4,\n    fontSize: 16,\n    cursor: 'pointer',\n    fontStyle: 'italic',\n    borderRadius: 12\n  }\n  return <button style={buttonStyle} onClick={eventHandler}> {text} </button>\n}\n\n\nconst Display = ({product, changeAvailable}) => {\n  const text = product.available\n    ? 'sold out'\n    : 'available'\n  return(\n    <li className='product'> \n      {product.id} - {product.name} - {product.category}\n      <Button eventHandler={changeAvailable}  text={text}/>\n    </li>\n  )\n}\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n \nconst App = () => {\n  const [products, setProducts] = useState([])\n  const [newProductName, setNewProductName] = useState ('a new product name')\n  const [newProductCategory, setNewProductCategory] = useState ('a new product category')\n  const [showAllProducts, setShowAllProducts] = useState(true)\n  const [errorMessage, setErrorMessage] = useState('no error happened...')\n\n  //load all existing products from the server\n  const hook = () => {\n    console.log('effect')\n    noteService\n      .getAll()\n      .then (initialNotes => {\n        console.log('promoise fulfilled')\n        setProducts(initialNotes)\n      })\n  }\n  useEffect(hook, [])\n\n  //add new product\n  const addProduct = (event) => {\n    event.preventDefault()\n    console.log('button clicked', event.target)\n    const productObject = {\n      name: newProductName,\n      category: newProductCategory,\n      available: Math.random() > 0.5\n    }\n\n    noteService\n      .createNote(productObject)\n      .then(returnedProduct => {\n        console.log(returnedProduct)\n        setProducts(products.concat(returnedProduct))\n        setNewProductName('a new product name')\n        setNewProductCategory('a new product category')\n    })\n  }\n\n  const handleProductNameChange = (event) => {\n    console.log(event.target.value)\n    setNewProductName(event.target.value)\n  }\n\n  const handleProductCategoryChange = (event) => {\n    console.log(event.target.value)\n    setNewProductCategory(event.target.value)\n  }\n\n  //change the availability of the product\n  const changeAvailableOf = (id) => {\n    console.log('the availability of ', id, 'needs to be changed')\n    const product = products.find(p => p.id === id)\n    const changedProduct = {...product, available: !product.available}\n    noteService\n      .updateNote(id, changedProduct)\n      .then(returnedProduct => {\n        setProducts(products.map(product => \n          product.id !== id\n            ? product\n            : returnedProduct\n        ))\n      })\n      .catch(error => {\n        setErrorMessage('the product was already deleted from server')\n        setTimeout(() => {\n          setErrorMessage('no errors happened')\n        }, 5000)\n        setProducts(products.filter(p => p.id !== id))\n      })\n  }\n\n  //show products with constraint\n  const productsToShow = showAllProducts\n  ? products\n  : products.filter(product => product.category === 'Electronics')\n  \n  const displayControl = () => {\n      setShowAllProducts(!showAllProducts)\n  }\n\n  console.log('render', products.length, 'products')\n\n  return (\n    <div>\n      <div> \n        <h3> Display existing products </h3>\n        <Notification message={errorMessage}/>\n        <Button eventHandler={displayControl} text={`Show ${showAllProducts? 'Electronics' : 'All'}` }/>\n        <ul>\n          {productsToShow.map(product => \n            <Display key={product.id} product={product} changeAvailable={() => changeAvailableOf(product.id)}/>\n          )}\n        </ul>\n      </div>\n      <div>\n      <h3> Adding new products </h3>\n      <form onSubmit={addProduct}>\n        <input \n        value={newProductName}\n        onChange={handleProductNameChange}\n        />\n        <input \n        value={newProductCategory}\n        onChange={handleProductCategoryChange}\n        />\n        <button type=\"submit\"> Save </button>\n      </form>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}